{"remainingRequest":"/Users/alone/VueProjects/one-piece-vue/node_modules/babel-loader/lib/index.js!/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alone/VueProjects/one-piece-vue/src/views/user/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alone/VueProjects/one-piece-vue/src/views/user/Login.vue","mtime":1596300577478},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/babel-loader/lib/index.js","mtime":1595422850086},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js","mtime":1596109940102}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9hbG9uZS9WdWVQcm9qZWN0cy9vbmUtcGllY2UtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB0aW1lRml4IH0gZnJvbSAnQC91dGlscy91dGlsJzsKaW1wb3J0IHsgZ2V0SGl0b2tvdG8gfSBmcm9tICdAL2FwaS90b29scyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VzdG9tQWN0aXZlS2V5OiAndGFiMScsCiAgICAgIGxvZ2luQnRuOiBmYWxzZSwKICAgICAgaXNMb2dpbkVycm9yOiBmYWxzZSwKICAgICAgcmVxdWlyZWRUd29TdGVwQ2FwdGNoYTogZmFsc2UsCiAgICAgIHN0ZXBDYXB0Y2hhVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKSwKICAgICAgc3RhdGU6IHsKICAgICAgICB0aW1lOiA2MCwKICAgICAgICBsb2dpbkJ0bjogZmFsc2UsCiAgICAgICAgc21zU2VuZEJ0bjogZmFsc2UKICAgICAgfSwKICAgICAgaGl0b2tvdG86ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgZ2V0SGl0b2tvdG8oJ2M9ZCcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpcy5oaXRva290byA9IHJlcy5oaXRva290bzsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnTG9naW4nLCAnTG9nb3V0J10pKSwge30sIHsKICAgIC8vIGhhbmRsZXIKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciB2YWxpZGF0ZUZpZWxkcyA9IHRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcywKICAgICAgICAgIHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIExvZ2luID0gdGhpcy5Mb2dpbjsKICAgICAgc3RhdGUubG9naW5CdG4gPSB0cnVlOwogICAgICB2YXIgdmFsaWRhdGVGaWVsZHNLZXkgPSBbJ2FjY291bnQnLCAncGFzc3dvcmQnXTsKICAgICAgdmFsaWRhdGVGaWVsZHModmFsaWRhdGVGaWVsZHNLZXksIHsKICAgICAgICBmb3JjZTogdHJ1ZQogICAgICB9LCBmdW5jdGlvbiAoZXJyLCB2YWx1ZXMpIHsKICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgdmFyIGxvZ2luUGFyYW1zID0gX29iamVjdFNwcmVhZCh7fSwgdmFsdWVzKTsKCiAgICAgICAgICBMb2dpbihsb2dpblBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIubG9naW5TdWNjZXNzKHJlcyk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIucmVxdWVzdEZhaWxlZChlcnIpOwogICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHN0YXRlLmxvZ2luQnRuID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHN0YXRlLmxvZ2luQnRuID0gZmFsc2U7CiAgICAgICAgICB9LCA2MDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g55m75b2V5oiQ5YqfCiAgICBsb2dpblN1Y2Nlc3M6IGZ1bmN0aW9uIGxvZ2luU3VjY2VzcyhyZXMpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmlzTG9naW5FcnJvciA9IGZhbHNlOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy8nCiAgICAgIH0pOyAvLyDlu7bov58gMSDnp5LmmL7npLrmrKLov47kv6Hmga8KCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy4kbm90aWZpY2F0aW9uLnN1Y2Nlc3MoewogICAgICAgICAgbWVzc2FnZTogJ+asoui/jicsCiAgICAgICAgICBkZXNjcmlwdGlvbjogIiIuY29uY2F0KHRpbWVGaXgoKSwgIlx1RkYwQ1x1NkIyMlx1OEZDRVx1NTZERVx1Njc2NSIpCiAgICAgICAgfSk7CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIHJlcXVlc3RGYWlsZWQ6IGZ1bmN0aW9uIHJlcXVlc3RGYWlsZWQoKSB7CiAgICAgIHRoaXMuaXNMb2dpbkVycm9yID0gdHJ1ZTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,OAAA,QAAA,cAAA;AACA,SAAA,WAAA,QAAA,aAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA,EADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,YAAA,EAAA,KAHA;AAIA,MAAA,sBAAA,EAAA,KAJA;AAKA,MAAA,kBAAA,EAAA,KALA;AAMA,MAAA,IAAA,EAAA,KAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CANA;AAOA,MAAA,KAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,KAFA;AAGA,QAAA,UAAA,EAAA;AAHA,OAPA;AAYA,MAAA,QAAA,EAAA;AAZA,KAAA;AAcA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AAAA;;AACA,IAAA,WAAA,CAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,GAAA,CAAA,QAAA;AACA,KAFA;AAGA,GAtBA;AAuBA,EAAA,OAAA,kCACA,UAAA,CAAA,CAAA,OAAA,EAAA,QAAA,CAAA,CADA;AAEA;AACA,IAAA,YAHA,wBAGA,CAHA,EAGA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AADA,UAGA,cAHA,GAMA,IANA,CAGA,IAHA,CAGA,cAHA;AAAA,UAIA,KAJA,GAMA,IANA,CAIA,KAJA;AAAA,UAKA,KALA,GAMA,IANA,CAKA,KALA;AAQA,MAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AAEA,UAAA,iBAAA,GAAA,CAAA,SAAA,EAAA,UAAA,CAAA;AAEA,MAAA,cAAA,CAAA,iBAAA,EAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA,EAAA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,YAAA,CAAA,GAAA,EAAA;AACA,cAAA,WAAA,qBAAA,MAAA,CAAA;;AAEA,UAAA,KAAA,CAAA,WAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA;AAAA,mBAAA,MAAA,CAAA,YAAA,CAAA,GAAA,CAAA;AAAA,WADA,EAEA,KAFA,CAEA,UAAA,GAAA;AAAA,mBAAA,MAAA,CAAA,aAAA,CAAA,GAAA,CAAA;AAAA,WAFA,EAGA,OAHA,CAGA,YAAA;AACA,YAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA,WALA;AAMA,SATA,MASA;AACA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA,WAFA,EAEA,GAFA,CAAA;AAGA;AACA,OAfA,CAAA;AAgBA,KA/BA;AAgCA;AACA,IAAA,YAjCA,wBAiCA,GAjCA,EAiCA;AAAA;;AACA,WAAA,YAAA,GAAA,KAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA,EAFA,CAGA;;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,OAAA,CAAA;AACA,UAAA,OAAA,EAAA,IADA;AAEA,UAAA,WAAA,YAAA,OAAA,EAAA;AAFA,SAAA;AAIA,OALA,EAKA,IALA,CAAA;AAMA,KA3CA;AA4CA,IAAA,aA5CA,2BA4CA;AACA,WAAA,YAAA,GAAA,IAAA;AACA;AA9CA;AAvBA,CAAA","sourcesContent":["<template>\n    <div class=\"main\">\n        <div class=\"desc\">\n            {{ hitokoto }}\n        </div>\n        <a-form id=\"formLogin\" class=\"user-layout-login\" ref=\"formLogin\" :form=\"form\" @submit=\"handleSubmit\">\n            <a-tabs :activeKey=\"customActiveKey\" :tabBarStyle=\"{ textAlign: 'center', borderBottom: 'unset' }\">\n                <a-tab-pane key=\"tab1\" tab=\"开始起航\">\n                    <a-alert v-if=\"isLoginError\" type=\"error\" showIcon style=\"margin-bottom: 24px;\" message=\"账户或密码错误\" />\n                    <a-form-item>\n                        <a-input\n                            size=\"large\"\n                            type=\"text\"\n                            placeholder=\"请输入管理员账户\"\n                            v-decorator=\"[\n                                'account',\n                                {rules: [{ required: true, message: '请输入帐户名' }], validateTrigger: 'blur'}\n                            ]\"\n                        >\n                            <a-icon slot=\"prefix\" type=\"user\" :style=\"{ color: 'rgba(0,0,0,.25)' }\" />\n                        </a-input>\n                    </a-form-item>\n\n                    <a-form-item>\n                        <a-input\n                            size=\"large\"\n                            type=\"password\"\n                            autocomplete=\"false\"\n                            placeholder=\"请输入密码\"\n                            v-decorator=\"[\n                                'password',\n                                {rules: [{ required: true, message: '请输入密码' }], validateTrigger: 'blur'}\n                            ]\"\n                        >\n                            <a-icon slot=\"prefix\" type=\"lock\" :style=\"{ color: 'rgba(0,0,0,.25)' }\" />\n                        </a-input>\n                    </a-form-item>\n                </a-tab-pane>\n            </a-tabs>\n\n            <a-form-item style=\"margin-top:24px\">\n                <a-button size=\"large\" type=\"primary\" htmlType=\"submit\" class=\"login-button\" :loading=\"state.loginBtn\" :disabled=\"state.loginBtn\">登录</a-button>\n            </a-form-item>\n        </a-form>\n\n        <two-step-captcha v-if=\"requiredTwoStepCaptcha\" :visible=\"stepCaptchaVisible\" @success=\"stepCaptchaSuccess\" @cancel=\"stepCaptchaCancel\"></two-step-captcha>\n    </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\nimport { timeFix } from '@/utils/util'\nimport { getHitokoto } from '@/api/tools'\n\nexport default {\n    components: {},\n    data() {\n        return {\n            customActiveKey: 'tab1',\n            loginBtn: false,\n            isLoginError: false,\n            requiredTwoStepCaptcha: false,\n            stepCaptchaVisible: false,\n            form: this.$form.createForm(this),\n            state: {\n                time: 60,\n                loginBtn: false,\n                smsSendBtn: false\n            },\n            hitokoto: ''\n        }\n    },\n    created () {\n        getHitokoto('c=d').then(res => {\n            this.hitokoto = res.hitokoto\n        })\n    },\n    methods: {\n        ...mapActions(['Login', 'Logout']),\n        // handler\n        handleSubmit(e) {\n            e.preventDefault()\n            const {\n                form: { validateFields },\n                state,\n                Login\n            } = this\n\n            state.loginBtn = true\n\n            const validateFieldsKey = ['account', 'password']\n\n            validateFields(validateFieldsKey, { force: true }, (err, values) => {\n                if (!err) {\n                    const loginParams = { ...values }\n\n                    Login(loginParams)\n                        .then(res => this.loginSuccess(res))\n                        .catch(err => this.requestFailed(err))\n                        .finally(() => {\n                            state.loginBtn = false\n                        })\n                } else {\n                    setTimeout(() => {\n                        state.loginBtn = false\n                    }, 600)\n                }\n            })\n        },\n        // 登录成功\n        loginSuccess(res) {\n            this.isLoginError = false\n            this.$router.push({ path: '/' })\n            // 延迟 1 秒显示欢迎信息\n            setTimeout(() => {\n                this.$notification.success({\n                    message: '欢迎',\n                    description: `${timeFix()}，欢迎回来`\n                })\n            }, 1000)\n        },\n        requestFailed() {\n            this.isLoginError = true\n        }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.user-layout-login {\n    label {\n        font-size: 14px;\n    }\n    .getCaptcha {\n        display: block;\n        width: 100%;\n        height: 40px;\n    }\n    .forge-password {\n        font-size: 14px;\n    }\n    button.login-button {\n        padding: 0 15px;\n        font-size: 16px;\n        height: 40px;\n        width: 100%;\n    }\n    .user-login-other {\n        text-align: left;\n        margin-top: 24px;\n        line-height: 22px;\n        .item-icon {\n            font-size: 24px;\n            color: rgba(0, 0, 0, 0.2);\n            margin-left: 16px;\n            vertical-align: middle;\n            cursor: pointer;\n            transition: color 0.3s;\n            &:hover {\n                color: #1890ff;\n            }\n        }\n        .register {\n            float: right;\n        }\n    }\n}\n.desc {\n    display: flex;\n    margin-top: 20px;\n    margin-bottom: 20px;\n    justify-content: center;\n}\n</style>\n"],"sourceRoot":"src/views/user"}]}