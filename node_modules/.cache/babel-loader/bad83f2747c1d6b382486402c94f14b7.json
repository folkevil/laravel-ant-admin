{"remainingRequest":"/Users/alone/VueProjects/one-piece-vue/node_modules/babel-loader/lib/index.js!/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alone/VueProjects/one-piece-vue/src/views/permission/role/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alone/VueProjects/one-piece-vue/src/views/permission/role/Index.vue","mtime":1597476828449},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/babel-loader/lib/index.js","mtime":1595422850086},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js","mtime":1596109940102}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL2Fsb25lL1Z1ZVByb2plY3RzL29uZS1waWVjZS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgU1RhYmxlIH0gZnJvbSAnQC9jb21wb25lbnRzJzsKaW1wb3J0IFJvbGVGb3JtIGZyb20gJy4vY29tcG9uZW50cy9Sb2xlRm9ybSc7CmltcG9ydCB7IGZldGNoUm9sZSwgYWRkUm9sZSwgdXBkYXRlUm9sZSwgZGVsZXRlUm9sZSB9IGZyb20gJ0AvYXBpL3JvbGUnOwp2YXIgc3RhdHVzTWFwID0gewogIDA6IHsKICAgIHN0YXR1czogJ2RlZmF1bHQnLAogICAgdGV4dDogJ+W3suemgeeUqCcKICB9LAogIDE6IHsKICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLAogICAgdGV4dDogJ+S9v+eUqOS4rScKICB9Cn07CnZhciBjb2x1bW5zID0gW3sKICB0aXRsZTogJ+WUr+S4gOivhuWIq+eggScsCiAgZGF0YUluZGV4OiAnbmFtZScKfSwgewogIHRpdGxlOiAn6KeS6Imy5ZCN56ewJywKICBzY29wZWRTbG90czogewogICAgY3VzdG9tUmVuZGVyOiAnZnVsbHRpdGxlJwogIH0KfSwgewogIHRpdGxlOiAn6KeS6Imy54q25oCBJywKICBzY29wZWRTbG90czogewogICAgY3VzdG9tUmVuZGVyOiAnc3RhdHVzJwogIH0KfSwgewogIHRpdGxlOiAn5Yib5bu65pe26Ze0JywKICBkYXRhSW5kZXg6ICdjcmVhdGVkX2F0Jwp9LCB7CiAgdGl0bGU6ICfmk43kvZwnLAogIHNjb3BlZFNsb3RzOiB7CiAgICBjdXN0b21SZW5kZXI6ICd0b29scycKICB9Cn1dOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgY29uZmlybUxvYWRpbmc6IGZhbHNlLAogICAgICBpbmZvOiB7fSwKICAgICAgcnVsZXM6IFtdLAogICAgICByb2xlVmlzaWJsZTogZmFsc2UsCiAgICAgIHJvbGVzOiBbXSwKICAgICAgZGF0YUFjY2Vzc1Zpc2FibGU6IGZhbHNlLAogICAgICBkYXRhQWNjZXNzRGVmYXVsdEV4cGFuZGVkS2V5czogW10sCiAgICAgIHNlbGVjdGVkSWQ6IDAsCiAgICAgIHJvbGVUcmVlOiBbXSwKICAgICAgcXVlcnlQYXJhbToge30sCiAgICAgIHJvbGVGb3JtVGl0bGU6ICfop5LoibLooajljZUnLAogICAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEocGFyYW1ldGVyKSB7CiAgICAgICAgcmV0dXJuIGZldGNoUm9sZSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIF9yZXMkZGF0YSA9IHJlcy5kYXRhLAogICAgICAgICAgICAgIHJvbGVzID0gX3JlcyRkYXRhLnJvbGVzLAogICAgICAgICAgICAgIHJ1bGVzID0gX3JlcyRkYXRhLnJ1bGVzOwogICAgICAgICAgX3RoaXMucm9sZXMgPSByb2xlczsKICAgICAgICAgIF90aGlzLnJ1bGVzID0gcnVsZXM7CgogICAgICAgICAgX3RoaXMucnVsZXNTZWxlY3RlZEluaXQocnVsZXMpOwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRhdGE6IHJvbGVzCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICB9LAogICAgICBzZWxlY3RlZFJvd3M6IFtdLAogICAgICBhbGxBY3Rpb25JZHM6IFtdLAogICAgICBjb2x1bW5zOiBjb2x1bW5zCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgU1RhYmxlOiBTVGFibGUsCiAgICBSb2xlRm9ybTogUm9sZUZvcm0KICB9LAogIHdhdGNoOiB7fSwKICBmaWx0ZXJzOiB7CiAgICBzdGF0dXNGaWx0ZXI6IGZ1bmN0aW9uIHN0YXR1c0ZpbHRlcih0eXBlKSB7CiAgICAgIHJldHVybiBzdGF0dXNNYXBbdHlwZV0udGV4dDsKICAgIH0sCiAgICBzdGF0dXNUeXBlRmlsdGVyOiBmdW5jdGlvbiBzdGF0dXNUeXBlRmlsdGVyKHR5cGUpIHsKICAgICAgcmV0dXJuIHN0YXR1c01hcFt0eXBlXS5zdGF0dXM7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkFkZFJvbGU6IGZ1bmN0aW9uIG9uQWRkUm9sZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnJvbGVGb3JtVGl0bGUgPSAn5paw5bu6JzsKICAgICAgdGhpcy5yb2xlVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZmlsdGVyUnVsZUFjdGlvbigpOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRyZWZzLnJvbGVGb3JtLmZvcm0uc2V0RmllbGRzVmFsdWUoKTsKICAgICAgfSk7CiAgICB9LAogICAgc2hvd1JvbGVNb2RhbDogZnVuY3Rpb24gc2hvd1JvbGVNb2RhbChyb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnJvbGVWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zZWxlY3RlZElkID0gcm93LmlkOwogICAgICB0aGlzLmluZm8gPSByb3c7CiAgICAgIHRoaXMucm9sZUZvcm1UaXRsZSA9ICfnvJbovpEnOwogICAgICB0aGlzLmZpbHRlclJ1bGVBY3Rpb24oKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy4kcmVmcy5yb2xlRm9ybS5mb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICAgIG5hbWU6IHJvdy5uYW1lLAogICAgICAgICAgdGl0bGU6IHJvdy50aXRsZSwKICAgICAgICAgIHN0YXR1czogcm93LnN0YXR1cwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVSb2xlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVSb2xlQ2FuY2VsKCkgewogICAgICB0aGlzLnJvbGVWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnMucm9sZUZvcm0uZm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLnNlbGVjdGVkSWQgPSAwOwogICAgICB0aGlzLnJ1bGVzLm1hcChmdW5jdGlvbiAocnVsZSkgewogICAgICAgIHJ1bGUuc2VsZWN0ZWQgPSBbXTsKICAgICAgICBydWxlLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTsKICAgICAgICBydWxlLmNoZWNrZWRBbGwgPSBmYWxzZTsKICAgICAgICBydWxlLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgcnVsZS5hY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgICBhY3Rpb24uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUm9sZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlUm9sZVN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLnJvbGVGb3JtLmZvcm0udmFsaWRhdGVGaWVsZHMoZnVuY3Rpb24gKGVyciwgdmFsdWVzKSB7CiAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgIHZhciBjaGVja2VkTGlzdCA9IFtdOwogICAgICAgICAgdmFyIHNlbGVjdGVkSWQgPSBfdGhpczQuc2VsZWN0ZWRJZCwKICAgICAgICAgICAgICBydWxlcyA9IF90aGlzNC5ydWxlczsKICAgICAgICAgIHJ1bGVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpdGVtLnNlbGVjdGVkLm1hcChmdW5jdGlvbiAocykgewogICAgICAgICAgICAgIGNoZWNrZWRMaXN0LnB1c2gocyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YWx1ZXMucnVsZXMgPSBjaGVja2VkTGlzdDsKICAgICAgICAgIHZhciBwcm9taXNlID0gc2VsZWN0ZWRJZCA9PT0gMCA/IGFkZFJvbGUodmFsdWVzKSA6IHVwZGF0ZVJvbGUoc2VsZWN0ZWRJZCwgdmFsdWVzKTsKICAgICAgICAgIF90aGlzNC5jb25maXJtTG9hZGluZyA9IHRydWU7CgogICAgICAgICAgdmFyIGhpZGUgPSBfdGhpczQuJG1lc3NhZ2UubG9hZGluZygn5omn6KGM5LitLi4nLCAwKTsKCiAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2VzcyhfdGhpczQuc2VsZWN0ZWRJZCA9PT0gMCA/ICfmt7vliqDmiJDlip/vvIEnIDogJ+abtOaWsOaIkOWKn++8gScpOwoKICAgICAgICAgICAgX3RoaXM0LmhhbmRsZVJvbGVDYW5jZWwoKTsKCiAgICAgICAgICAgIF90aGlzNC5yZWZyZXNoVGFibGUoKTsKICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBoaWRlKCk7CiAgICAgICAgICAgIF90aGlzNC5jb25maXJtTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVSb2xlRGVsZXRlQ29uZmlybTogZnVuY3Rpb24gaGFuZGxlUm9sZURlbGV0ZUNvbmZpcm0oaWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKHsKICAgICAgICB0aXRsZTogJ+ehruWumuWIoOmZpOatpOinkuiJsuWQlz8nLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIG9rVGV4dDogJ+ehruWumicsCiAgICAgICAgb2tUeXBlOiAnZGFuZ2VyJywKICAgICAgICBjYW5jZWxUZXh0OiAn5Y+W5raIJywKICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgdmFyIGhpZGUgPSBfdGhpczUuJG1lc3NhZ2UubG9hZGluZygn5Yig6Zmk5LitLi4nLCAwKTsKCiAgICAgICAgICBkZWxldGVSb2xlKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXM1LiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKn++8gScpOwoKICAgICAgICAgICAgX3RoaXM1LnJlZnJlc2hUYWJsZSgpOwogICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAocikgewogICAgICAgICAgICBoaWRlKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGV4cGFuZGVkRGVwdDogZnVuY3Rpb24gZXhwYW5kZWREZXB0KGRlcHRzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIGV4cGFuZGVkS2V5cyA9IFtdOwogICAgICBkZXB0cy5tYXAoZnVuY3Rpb24gKGRlcHQpIHsKICAgICAgICBleHBhbmRlZEtleXMucHVzaChkZXB0LnZhbHVlKTsKCiAgICAgICAgaWYgKGRlcHQuY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgZXhwYW5kZWRLZXlzLnB1c2guYXBwbHkoZXhwYW5kZWRLZXlzLCBfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXM2LmV4cGFuZGVkRGVwdChkZXB0LmNoaWxkcmVuKSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBleHBhbmRlZEtleXM7CiAgICB9LAogICAgb25DaGFuZ2VBY3Rpb246IGZ1bmN0aW9uIG9uQ2hhbmdlQWN0aW9uKHBlcm1pc3Npb24pIHsKICAgICAgdmFyIG5vdERpc2FibGVkTGVuID0gMDsKICAgICAgcGVybWlzc2lvbi5hY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgaWYgKGFjdGlvbi5kaXNhYmxlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgIG5vdERpc2FibGVkTGVuID0gbm90RGlzYWJsZWRMZW4gKyAxOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHBlcm1pc3Npb24uaW5kZXRlcm1pbmF0ZSA9ICEhcGVybWlzc2lvbi5zZWxlY3RlZC5sZW5ndGggJiYgcGVybWlzc2lvbi5zZWxlY3RlZC5sZW5ndGggPCBub3REaXNhYmxlZExlbjsKICAgICAgcGVybWlzc2lvbi5jaGVja2VkQWxsID0gcGVybWlzc2lvbi5zZWxlY3RlZC5sZW5ndGggPT09IG5vdERpc2FibGVkTGVuOwogICAgICB0aGlzLnJ1bGVzID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMucnVsZXMpOwogICAgfSwKICAgIG9uQ2hlY2tBbGxBY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hlY2tBbGxBY3Rpb25DaGFuZ2UoZSwgcGVybWlzc2lvbikgewogICAgICBjb25zb2xlLmxvZyhlKTsgLy8g6K6w5b2V5pyJ5p2D6ZmQ55qE5pON5L2cCgogICAgICB2YXIgaGFzUGVybWlzc2lvbkFjdGlvbiA9IFtdOwogICAgICBwZXJtaXNzaW9uLmFjdGlvbnMubWFwKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICBpZiAoYWN0aW9uLmRpc2FibGVkID09PSBmYWxzZSkgewogICAgICAgICAgaGFzUGVybWlzc2lvbkFjdGlvbi5wdXNoKGFjdGlvbi5pZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgT2JqZWN0LmFzc2lnbihwZXJtaXNzaW9uLCB7CiAgICAgICAgc2VsZWN0ZWQ6IGUudGFyZ2V0LmNoZWNrZWQgPyBoYXNQZXJtaXNzaW9uQWN0aW9uIDogW10sCiAgICAgICAgaW5kZXRlcm1pbmF0ZTogZmFsc2UsCiAgICAgICAgY2hlY2tlZEFsbDogZS50YXJnZXQuY2hlY2tlZAogICAgICB9KTsKICAgICAgdGhpcy5ydWxlcyA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnJ1bGVzKTsKICAgIH0sCiAgICBvbkNoYW5nZUFsbDogZnVuY3Rpb24gb25DaGFuZ2VBbGwoKSB7fSwKICAgIHJlZnJlc2hUYWJsZTogZnVuY3Rpb24gcmVmcmVzaFRhYmxlKCkgewogICAgICB0aGlzLiRyZWZzLnRhYmxlLnJlZnJlc2goKTsKICAgIH0sCiAgICBmaWx0ZXJSdWxlQWN0aW9uOiBmdW5jdGlvbiBmaWx0ZXJSdWxlQWN0aW9uKCkgewogICAgICB2YXIgcnVsZXMgPSB0aGlzLnJ1bGVzOwogICAgICB2YXIgYWxsUGVybWlzc2lvbkFjdGlvbnNJZHMgPSBbXTsKICAgICAgYWxsUGVybWlzc2lvbkFjdGlvbnNJZHMgPSB0aGlzLmFsbEFjdGlvbklkczsgLy8g5pu05paw5pe2IOiHquWKqOWLvumAieW3sumAieaLqeeahOadg+mZkAoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJZCA+IDApIHsKICAgICAgICB2YXIgcGVybWlzc2lvbnMgPSB0aGlzLmluZm8ucGVybWlzc2lvbnM7CiAgICAgICAgcnVsZXMubWFwKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgICBydWxlLnNlbGVjdGVkID0gW107IC8vIOiusOW9leW9k+WJjeiPnOWNleWPr+mAieaTjeS9nOaVsOmHjwoKICAgICAgICAgIHZhciBydWxlU2VsZWN0Q291bnQgPSAwOwogICAgICAgICAgcnVsZS5hY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgICAgIGlmIChwZXJtaXNzaW9ucy5pbmRleE9mKGFjdGlvbi5pZCkgIT09IC0xKSB7CiAgICAgICAgICAgICAgcnVsZS5zZWxlY3RlZC5wdXNoKGFjdGlvbi5pZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFjdGlvbi5kaXNhYmxlZCA9IGFsbFBlcm1pc3Npb25BY3Rpb25zSWRzLmluZGV4T2YoYWN0aW9uLmlkKSA9PT0gLTE7CgogICAgICAgICAgICBpZiAoYWN0aW9uLmRpc2FibGVkID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHJ1bGVTZWxlY3RDb3VudCA9IHJ1bGVTZWxlY3RDb3VudCArIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcnVsZS5pbmRldGVybWluYXRlID0gISFydWxlLnNlbGVjdGVkLmxlbmd0aCAmJiBydWxlLnNlbGVjdGVkLmxlbmd0aCA8IHJ1bGVTZWxlY3RDb3VudDsKCiAgICAgICAgICBpZiAocnVsZS5zZWxlY3RlZC5sZW5ndGgpIHsKICAgICAgICAgICAgcnVsZS5jaGVja2VkQWxsID0gcnVsZS5zZWxlY3RlZC5sZW5ndGggPT09IHJ1bGVTZWxlY3RDb3VudDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDliJvlu7rml7YKICAgICAgICBydWxlcy5tYXAoZnVuY3Rpb24gKHJ1bGUpIHsKICAgICAgICAgIHJ1bGUuYWN0aW9ucy5tYXAoZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgICAgICBhY3Rpb24uZGlzYWJsZWQgPSBhbGxQZXJtaXNzaW9uQWN0aW9uc0lkcy5pbmRleE9mKGFjdGlvbi5pZCkgPT09IC0xOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMucnVsZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkocnVsZXMpOwogICAgfSwKICAgIHJ1bGVzU2VsZWN0ZWRJbml0OiBmdW5jdGlvbiBydWxlc1NlbGVjdGVkSW5pdChydWxlcykgewogICAgICB2YXIgYWxsQWN0aW9uSWRzID0gW107CiAgICAgIHRoaXMucnVsZXMgPSBydWxlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBPYmplY3QuYXNzaWduKGl0ZW0sIHsKICAgICAgICAgIHNlbGVjdGVkOiBbXSwKICAgICAgICAgIGluZGV0ZXJtaW5hdGU6IGZhbHNlLAogICAgICAgICAgY2hlY2tlZEFsbDogZmFsc2UsCiAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICB9KTsgLy8g5Yid5aeL5YyW54q25oCBCgogICAgICAgIGlmIChpdGVtLmFjdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgaXRlbS5hY3Rpb25zLm1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgICAgIGFsbEFjdGlvbklkcy5wdXNoKGFjdGlvbi5pZCk7CiAgICAgICAgICAgIGFjdGlvbi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWxsQWN0aW9uSWRzID0gYWxsQWN0aW9uSWRzOwogICAgfSwKICAgIGV4cGFuZEljb246IGZ1bmN0aW9uIGV4cGFuZEljb24oX3JlZikgewogICAgICB2YXIgZXhwYW5kZWQgPSBfcmVmLmV4cGFuZGVkOwogICAgICB2YXIgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7CgogICAgICBpZiAoZXhwYW5kZWQgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gaCgiYS1pY29uIiwgewogICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAidHlwZSI6ICdkb3duJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gaCgiYS1pY29uIiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJ0eXBlIjogJ3JpZ2h0JwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <page-header-wrapper>\n        <a-card :body-style=\"{ padding: 0 }\">\n            <div class=\"table-operator-right\">\n                <a-button v-action:addRole type=\"primary\" icon=\"plus\" @click=\"onAddRole\">新建</a-button>\n                <a-divider type=\"vertical\"/>\n                <span class=\"ant-pro-table-toolbar-item-icon\">\n                    <a-tooltip placement=\"top\">\n                    <template slot=\"title\">\n                        <span>刷新</span>\n                    </template>\n                    <a-icon type=\"reload\" @click=\"refreshTable()\"/>\n                    </a-tooltip>\n                </span>\n            </div>\n            <s-table\n                ref=\"table\"\n                size=\"default\"\n                :rowKey=\"(record) => record.id\"\n                :columns=\"columns\"\n                :data=\"loadData\"\n                :expandRowByClick=\"true\"\n                :showPagination=\"false\"\n                :expandIcon=\"expandIcon\"\n            >\n\n            <p slot=\"expandedRowRender\" slot-scope=\"row\">\n                <a-row>\n                    <a-col class=\"rule-list\" span=\"12\" v-for=\"(item, index) in rules\" :key=\"index\">\n                    <a-row>\n                        <a-col span=\"4\">{{ item.title }}：</a-col>\n                        <a-col span=\"20\">\n                        <template v-if=\"!item.actions.length\">-</template>\n                        <template v-for=\"(action, i) in item.actions\">\n                            <a-tag color=\"blue\" :key=\"i\" v-if=\"row.permissions.indexOf(action.id) !== -1\">\n                                {{ action.title }}\n                            </a-tag>\n                            <a-tag :key=\"i\" v-else>\n                                {{ action.title }}\n                            </a-tag>\n                        </template>\n                        </a-col>\n                    </a-row>\n                    </a-col>\n                </a-row>\n            </p>\n\n            <template slot=\"status\" slot-scope=\"row\">\n                <a-badge :status=\"row.status | statusTypeFilter\" :text=\"row.status | statusFilter\" />\n            </template>\n\n            <template slot=\"fulltitle\" slot-scope=\"row\">\n                <span v-html=\"row.title\"></span>\n            </template>\n\n            <template slot=\"tools\" slot-scope=\"row\">\n                <a v-action:editRole @click=\"showRoleModal(row)\">编辑</a>\n                <a-divider type=\"vertical\" />\n                <a v-action:deleteRole @click=\"handleRoleDeleteConfirm(row.id)\">删除</a>\n            </template>\n      </s-table>\n    </a-card>\n\n    <RoleForm\n        ref=\"roleForm\"\n        :title=\"roleFormTitle\"\n        :rules=\"rules\"\n        :visible=\"roleVisible\"\n        :confirmLoading=\"confirmLoading\"\n        @changeRole=\"filterRuleAction\"\n        @checkAllActionChange=\"onCheckAllActionChange\"\n        @changeAction=\"onChangeAction\"\n        @changeAll=\"onChangeAll\"\n        @submit=\"handleRoleSubmit\"\n        @cancel=\"handleRoleCancel\"\n    />\n\n  </page-header-wrapper>\n</template>\n\n<script>\nimport { STable } from '@/components'\nimport RoleForm from './components/RoleForm'\nimport { fetchRole, addRole, updateRole, deleteRole } from '@/api/role'\nconst statusMap = {\n    0: {\n        status: 'default',\n        text: '已禁用'\n    },\n    1: {\n        status: 'processing',\n        text: '使用中'\n    }\n}\n\nconst columns = [{\n        title: '唯一识别码',\n        dataIndex: 'name'\n    },\n    {\n        title: '角色名称',\n        scopedSlots: { customRender: 'fulltitle' }\n    },\n    {\n        title: '角色状态',\n        scopedSlots: { customRender: 'status' }\n    },\n    {\n        title: '创建时间',\n        dataIndex: 'created_at'\n    },\n    {\n        title: '操作',\n        scopedSlots: { customRender: 'tools' }\n    }\n]\nexport default {\n    data() {\n        return {\n            confirmLoading: false,\n            info: {},\n            rules: [],\n            roleVisible: false,\n            roles: [],\n            dataAccessVisable: false,\n            dataAccessDefaultExpandedKeys: [],\n            selectedId: 0,\n            roleTree: [],\n            queryParam: {},\n            roleFormTitle: '角色表单',\n            loadData: parameter => {\n                return fetchRole().then(res => {\n                    const { roles, rules } = res.data\n                    this.roles = roles\n                    this.rules = rules\n                    this.rulesSelectedInit(rules)\n\n                    return {\n                        data: roles\n                    }\n                })\n            },\n            selectedRows: [],\n            allActionIds: [],\n            columns\n        }\n    },\n    components: { STable, RoleForm },\n    watch: {},\n    filters: {\n        statusFilter(type) {\n            return statusMap[type].text\n        },\n        statusTypeFilter(type) {\n            return statusMap[type].status\n        }\n    },\n    methods: {\n        onAddRole() {\n            this.roleFormTitle = '新建'\n            this.roleVisible = true\n            this.filterRuleAction()\n            this.$nextTick(() => {\n                this.$refs.roleForm.form.setFieldsValue()\n            })\n        },\n        showRoleModal(row) {\n            this.roleVisible = true\n            this.selectedId = row.id\n            this.info = row\n            this.roleFormTitle = '编辑'\n\n            this.filterRuleAction()\n\n            this.$nextTick(() => {\n                this.$refs.roleForm.form.setFieldsValue({\n                    name: row.name,\n                    title: row.title,\n                    status: row.status\n                })\n            })\n        },\n        handleRoleCancel() {\n            this.roleVisible = false\n            this.$refs.roleForm.form.resetFields()\n            this.selectedId = 0\n            this.rules.map(rule => {\n                rule.selected = []\n                rule.indeterminate = false\n                rule.checkedAll = false\n                rule.disabled = false\n                rule.actions.map(action => {\n                    action.disabled = false\n                })\n            })\n        },\n        handleRoleSubmit() {\n            this.$refs.roleForm.form.validateFields((err, values) => {\n                if (!err) {\n                    const checkedList = []\n                    const { selectedId, rules } = this\n                    rules.map(item => {\n                        item.selected.map(s => {\n                            checkedList.push(s)\n                        })\n                    })\n                    values.rules = checkedList\n                    const promise = selectedId === 0 ? addRole(values) : updateRole(selectedId, values)\n                    this.confirmLoading = true\n                    const hide = this.$message.loading('执行中..', 0)\n                    promise.then(res => {\n                        this.$message.success(this.selectedId === 0 ? '添加成功！' : '更新成功！')\n                        this.handleRoleCancel()\n                        this.refreshTable()\n                    }).finally(() => {\n                        hide()\n                        this.confirmLoading = false\n                    })\n                }\n            })\n        },\n        handleRoleDeleteConfirm(id) {\n            this.$confirm({\n                title: '确定删除此角色吗?',\n                content: '',\n                okText: '确定',\n                okType: 'danger',\n                cancelText: '取消',\n                onOk: () => {\n                    const hide = this.$message.loading('删除中..', 0)\n                    deleteRole(id).then(res => {\n                        this.$message.success('删除成功！')\n                        this.refreshTable()\n                    }).finally(r => {\n                        hide()\n                    })\n                }\n            })\n        },\n\n        expandedDept(depts) {\n            const expandedKeys = []\n            depts.map(dept => {\n                expandedKeys.push(dept.value)\n                if (dept.children !== undefined) {\n                    expandedKeys.push(...this.expandedDept(dept.children))\n                }\n            })\n\n            return expandedKeys\n        },\n\n        onChangeAction(permission) {\n            let notDisabledLen = 0\n            permission.actions.map(action => {\n                if (action.disabled === false) {\n                    notDisabledLen = notDisabledLen + 1\n                }\n            })\n            permission.indeterminate = !!permission.selected.length && (permission.selected.length < notDisabledLen)\n            permission.checkedAll = permission.selected.length === notDisabledLen\n            this.rules = [...this.rules]\n        },\n\n        onCheckAllActionChange(e, permission) {\n            console.log(e)\n            // 记录有权限的操作\n            const hasPermissionAction = []\n            permission.actions.map(action => {\n                if (action.disabled === false) {\n                    hasPermissionAction.push(action.id)\n                }\n            })\n            Object.assign(permission, {\n                selected: e.target.checked ? hasPermissionAction : [],\n                indeterminate: false,\n                checkedAll: e.target.checked\n            })\n            this.rules = [...this.rules]\n        },\n        onChangeAll() {\n\n        },\n        refreshTable() {\n            this.$refs.table.refresh()\n        },\n        filterRuleAction() {\n            const { rules } = this\n            let allPermissionActionsIds = []\n            allPermissionActionsIds = this.allActionIds\n            // 更新时 自动勾选已选择的权限\n            if (this.selectedId > 0) {\n                const { info: { permissions } } = this\n                rules.map(rule => {\n                    rule.selected = []\n                    // 记录当前菜单可选操作数量\n                    let ruleSelectCount = 0\n\n                    rule.actions.map(action => {\n                        if (permissions.indexOf(action.id) !== -1) {\n                            rule.selected.push(action.id)\n                        }\n                        action.disabled = allPermissionActionsIds.indexOf(action.id) === -1\n                        if (action.disabled === false) {\n                            ruleSelectCount = ruleSelectCount + 1\n                        }\n                    })\n\n                    rule.indeterminate = !!rule.selected.length && (rule.selected.length < ruleSelectCount)\n                    if (rule.selected.length) {\n                        rule.checkedAll = rule.selected.length === ruleSelectCount\n                    }\n                })\n            } else {\n                // 创建时\n                rules.map(rule => {\n                    rule.actions.map(action => {\n                        action.disabled = allPermissionActionsIds.indexOf(action.id) === -1\n                    })\n                })\n            }\n            this.rules = [...rules]\n        },\n        rulesSelectedInit(rules) {\n            const allActionIds = []\n            this.rules = rules.map(item => {\n                Object.assign(item, {\n                    selected: [],\n                    indeterminate: false,\n                    checkedAll: false,\n                    disabled: false\n                })\n                // 初始化状态\n                if (item.actions.length > 0) {\n                    item.actions.map(action => {\n                        allActionIds.push(action.id)\n                        action.disabled = false\n                    })\n                }\n                return item\n            })\n            this.allActionIds = allActionIds\n        },\n        expandIcon({ expanded }) {\n            if (expanded === true) {\n                return <a-icon type = 'down' />\n            }\n            return <a-icon type = 'right' />\n        }\n    }\n}\n</script>\n"],"sourceRoot":"src/views/permission/role"}]}