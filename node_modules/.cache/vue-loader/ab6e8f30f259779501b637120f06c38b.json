{"remainingRequest":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alone/VueProjects/one-piece-vue/src/views/permission/menu/components/PermissionForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alone/VueProjects/one-piece-vue/src/views/permission/menu/components/PermissionForm.vue","mtime":1596447763683},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/babel-loader/lib/index.js","mtime":1595422850086},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js","mtime":1596109940102}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IENvbXBvbmVudHMgfSBmcm9tICdAL2NvbmZpZy9jb21wb25lbnRDb25maWdzJwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBzZWxlY3RlZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAKICAgIH0sCiAgICB0cmVlRGF0YTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXQogICAgICB9CiAgICB9LAogICAgc3RhdHVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdCiAgICAgIH0KICAgIH0sCiAgICB0eXBlTWFwOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7fQogICAgICB9CiAgICB9LAogICAgdmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGNvbmZpcm1Mb2FkaW5nOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIENvbXBvbmVudHMKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5mb3JtID0gdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMsIHsgbmFtZTogJ3Blcm1pc3Npb25fZnJvbScgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUJ1dHRvblR5cGVDaGFuZ2UgKHYpIHsKICAgICAgY29uc3QgcGlkID0gdGhpcy5mb3JtLmdldEZpZWxkVmFsdWUoJ3BpZCcpCiAgICAgIGNvbnN0IHRlbXAgPSAoZGF0YSwgdGFyZ2V0KSA9PiB7CiAgICAgICAgbGV0IHJlc3VsdCA9IG51bGwKICAgICAgICBmb3IgKGNvbnN0IGkgaW4gZGF0YSkgewogICAgICAgICAgaWYgKGRhdGFbaV0uaWQudG9TdHJpbmcoKSA9PT0gdGFyZ2V0KSB7CiAgICAgICAgICAgIHJlc3VsdCA9IGRhdGFbaV0KICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgJiYgZGF0YVtpXS5jaGlsZHJlbikgewogICAgICAgICAgICByZXN1bHQgPSB0ZW1wKGRhdGFbaV0uY2hpbGRyZW4sIHRhcmdldCkKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQKICAgICAgfQogICAgICBjb25zdCB0ID0gdGVtcCh0aGlzLnRyZWVEYXRhLCBwaWQpCiAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSh7CiAgICAgICAgdGl0bGU6IHRoaXMuJGVudW0oKVt2XS5sYWJlbCwKICAgICAgICBuYW1lOiB2ICsgdC5uYW1lCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["PermissionForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PermissionForm.vue","sourceRoot":"src/views/permission/menu/components","sourcesContent":["<template>\n  <a-modal\n    :width=\"650\"\n    :title=\"selected ? '修改菜单' : '添加菜单'\"\n    :visible=\"visible\"\n    :confirmLoading=\"confirmLoading\"\n    @ok=\"$emit('submit')\"\n    @cancel=\"$emit('cancel')\">\n    <a-form :form=\"form\" layout=\"inline\">\n      <a-row :gutter=\"0\">\n        <a-col :span=\"12\">\n          <a-form-item label=\"菜单类型\">\n            <a-radio-group\n              v-decorator=\"[\n                'type',\n                {\n                  rules: [{ required: true, message: '请选择类型!' }]\n                }\n              ]\"\n            >\n              <a-radio-button :value=\"type.value\" v-for=\"type in typeMap\" :key=\"type.value\">{{ type.text }}</a-radio-button>\n            </a-radio-group>\n          </a-form-item>\n        </a-col>\n\n        <a-col :span=\"12\">\n          <a-form-item label=\"上级类目\" hasFeedback>\n            <a-tree-select\n              style=\"min-width:184px\"\n              :dropdownStyle=\"{ maxHeight: '400px', overflow: 'auto' }\"\n              placeholder=\"请选择所属类目\"\n              allowClear\n              treeDefaultExpandAll\n              :treeData=\"treeData\"\n              v-decorator=\"[\n                'pid',\n                {\n                  rules: [{ required: true, message: '请选择所属类目!' }]\n                }\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n        <a-col :span=\"12\" v-show=\"form.getFieldValue('pid') && form.getFieldValue('type') == 'action'\">\n          <a-form-item label=\"按钮配置\">\n            <a-radio-group\n              v-decorator=\"[\n                'action_type',\n                {\n                  rules: [{ required: form.getFieldValue('type') == 'action', message: '请选择按钮配置!' }],\n                  initialValue: 0\n                }\n              ]\"\n            >\n              <a-radio-button :value=\"1\">默认配置</a-radio-button>\n              <a-radio-button :value=\"2\">自定义</a-radio-button>\n            </a-radio-group>\n          </a-form-item>\n        </a-col>\n        <a-col :span=\"12\" v-show=\"form.getFieldValue('action_type') == 1 && form.getFieldValue('pid') && form.getFieldValue('type') === 'action'\">\n          <a-form-item label=\"按钮类型\">\n            <a-select\n              style=\"min-width: 184px\"\n              placeholder=\"选择按钮类型\"\n              @change=\"handleButtonTypeChange\"\n              v-decorator=\"[\n                'button_type',\n                {\n                  rules: [{ required: form.getFieldValue('type') === 'action' && form.getFieldValue('action_type') == 1, message: '请选择按钮类型!' }]\n                }\n              ]\"\n            >\n              <a-select-option :value=\"item.key\" v-for=\"(item, key) in $enum()\" :key=\"key\">\n                {{ item.label }}\n              </a-select-option>\n            </a-select>\n          </a-form-item>\n        </a-col>\n        <a-col :span=\"12\" v-show=\"form.getFieldValue('pid')\">\n          <a-form-item label=\"菜单标题\" hasFeedback>\n            <a-input\n              placeholder=\"菜单标题\"\n              v-decorator=\"[\n                'title',\n                {\n                  rules: [{ required: true, message: '请输入菜单标题!' }]\n                }\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n\n        <a-col :span=\"12\" v-show=\"form.getFieldValue('pid')\">\n          <a-form-item label=\"权限标识\" hasFeedback>\n            <a-input\n              placeholder=\"唯一识别码\"\n              v-decorator=\"[\n                'name',\n                {\n                  rules: [{ required: true, message: '请输入唯一识别码!' }]\n                }\n              ]\"\n            />\n          </a-form-item>\n        </a-col>\n\n        <a-col :span=\"24\" v-show=\"form.getFieldValue('pid')\">\n          <a-col :span=\"12\">\n            <a-form-item v-if=\"form.getFieldValue('type') !== 'action'\" label=\"组件地址\">\n              <a-select\n                style=\"width: 184px\"\n                v-decorator=\"[\n                  'component',\n                  {\n                    rules: [{ required: form.getFieldValue('type') !== 'action', message: '请选择组件!' }]\n                  }\n                ]\">\n                >\n                <a-select-opt-group v-for=\"(list, type) in Components\" :key=\"type\" :label=\"type\">\n                  <a-select-option :value=\"name\" v-for=\"(item, name) in list\" :key=\"name\">{{ name }}</a-select-option>\n                </a-select-opt-group>\n              </a-select>\n            </a-form-item>\n          </a-col>\n\n          <a-col :span=\"12\" v-if=\"form.getFieldValue('type') !== 'action'\">\n            <a-form-item label=\"路由地址\" hasFeedback>\n              <a-input\n                placeholder=\"路由地址\"\n                v-decorator=\"[\n                  'path',\n                  {\n                    rules: [{ required: form.getFieldValue('type') !== 'action', message: '请填写路由地址!' }]\n                  }\n                ]\"\n              />\n            </a-form-item>\n          </a-col>\n        </a-col>\n        <a-col :span=\"24\">\n          <a-form-item v-show=\"form.getFieldValue('type') === 'path'\" label=\"Redirect\">\n            <a-input\n              v-decorator=\"[\n                'redirect',\n                {\n                  rules: [{ required: form.getFieldValue('type') === 'path', message: '请重定向地址!' }]\n                }\n              ]\"\n            >\n            </a-input>\n          </a-form-item>\n        </a-col>\n\n        <a-col :span=\"24\" v-show=\"form.getFieldValue('pid')\">\n          <a-col :span=\"12\">\n            <a-form-item label=\"菜单状态\">\n              <a-radio-group\n                v-decorator=\"[\n                  'status',\n                  {\n                    rules: [{ required: true, message: '请选择菜单状态!' }],\n                    initialValue: 1\n                  }\n                ]\"\n              >\n                <a-radio-button :key=\"key\" :value=\"type.value\" v-for=\"(type, key) in status\">{{ type.label }}</a-radio-button>\n              </a-radio-group>\n            </a-form-item>\n          </a-col>\n\n          <a-col :span=\"12\" v-if=\"form.getFieldValue('type') !== 'action'\">\n            <a-form-item label=\"菜单缓存\">\n              <a-radio-group\n                v-decorator=\"[\n                  'keepAlive',\n                  {\n                    rules: [{ required: true, message: '请选择菜单缓存!' }],\n                    initialValue: 0\n                  }\n                ]\"\n              >\n                <a-radio-button :key=\"key\" :value=\"type.value\" v-for=\"(type, key) in status\">{{ type.label }}</a-radio-button>\n              </a-radio-group>\n            </a-form-item>\n          </a-col>\n\n          <a-col :span=\"12\" v-if=\"form.getFieldValue('type') !== 'action'\">\n            <a-form-item label=\"菜单隐藏\">\n              <a-radio-group\n                v-decorator=\"[\n                  'hidden',\n                  {\n                    rules: [{ required: true, message: '请选择菜单可见!' }],\n                    initialValue: 0\n                  }\n                ]\"\n              >\n                <a-radio-button :key=\"key\" :value=\"type.value\" v-for=\"(type, key) in status\">\n                  {{ type.label }}</a-radio-button>\n              </a-radio-group>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"12\" v-if=\"form.getFieldValue('type') !== 'action'\">\n            <a-form-item label=\"隐藏子菜单\">\n              <a-radio-group\n                v-decorator=\"[\n                  'hideChildrenInMenu',\n                  {\n                    rules: [{ required: true, message: '请选择隐藏子菜单!' }],\n                    initialValue: 0\n                  }\n                ]\"\n              >\n                <a-radio-button :key=\"key\" :value=\"type.value\" v-for=\"(type, key) in status\">{{ type.label }}</a-radio-button>\n              </a-radio-group>\n            </a-form-item>\n          </a-col>\n        </a-col>\n\n        <a-col :span=\"12\" v-if=\"form.getFieldValue('type') !== 'action'\" >\n          <a-form-item label=\"Permission\">\n            <a-select\n              style=\"min-width: 184px\"\n              mode=\"tags\"\n              placeholder=\"Permission\"\n              v-decorator=\"[\n                'permission'\n              ]\"\n            >\n            </a-select>\n          </a-form-item>\n        </a-col>\n\n        <a-col :span=\"12\" v-if=\"form.getFieldValue('type') !== 'action'\" >\n          <a-form-item label=\"菜单图标\">\n            <a-input\n              slot=\"default\"\n              style=\"width: 184px;\"\n              v-decorator=\"[\n                'icon'\n              ]\">\n              <a-icon slot=\"prefix\" type=\"search\" />\n            </a-input>\n          </a-form-item>\n        </a-col>\n      </a-row>\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport { Components } from '@/config/componentConfigs'\n\nexport default {\n  props: {\n    selected: {\n      type: Number,\n      default: 0\n    },\n    treeData: {\n      type: Array,\n      default: () => {\n        return []\n      }\n    },\n    status: {\n      type: Array,\n      default: () => {\n        return []\n      }\n    },\n    typeMap: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    },\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    confirmLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      Components\n    }\n  },\n  created () {\n    this.form = this.$form.createForm(this, { name: 'permission_from' })\n  },\n  methods: {\n    handleButtonTypeChange (v) {\n      const pid = this.form.getFieldValue('pid')\n      const temp = (data, target) => {\n        let result = null\n        for (const i in data) {\n          if (data[i].id.toString() === target) {\n            result = data[i]\n            break\n          }\n          if (result === null && data[i].children) {\n            result = temp(data[i].children, target)\n          }\n        }\n\n        return result\n      }\n      const t = temp(this.treeData, pid)\n      this.form.setFieldsValue({\n        title: this.$enum()[v].label,\n        name: v + t.name\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.ant-form-inline .ant-form-item {\n    display: inline-block;\n    margin-right: 16px;\n    margin-bottom: 18px;\n}\n</style>\n"]}]}