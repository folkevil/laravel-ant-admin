{"remainingRequest":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alone/VueProjects/one-piece-vue/src/views/permission/menu/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alone/VueProjects/one-piece-vue/src/views/permission/menu/Index.vue","mtime":1596447712886},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/babel-loader/lib/index.js","mtime":1595422850086},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js","mtime":1596109940102}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFNUYWJsZSB9IGZyb20gJ0AvY29tcG9uZW50cycKaW1wb3J0IFBlcm1pc3Npb25Gb3JtIGZyb20gJy4vY29tcG9uZW50cy9QZXJtaXNzaW9uRm9ybScKaW1wb3J0IHsgZmV0Y2hQZXJtaXNzaW9uLCBhZGRQZXJtaXNzaW9uLCB1cGRhdGVQZXJtaXNzaW9uLCBkZWxldGVQZXJtaXNzaW9uIH0gZnJvbSAnQC9hcGkvcGVybWlzc2lvbicKY29uc3Qgc3RhdHVzID0gW3sgbGFiZWw6ICfmmK8nLCB2YWx1ZTogMSB9LCB7IGxhYmVsOiAn5ZCmJywgdmFsdWU6IDAgfV0KY29uc3Qgc3RhdHVzTWFwID0gewogICAgMDogewogICAgICAgIHN0YXR1czogJ2RlZmF1bHQnLAogICAgICAgIHRleHQ6ICflt7LnpoHnlKgnCiAgICB9LAogICAgMTogewogICAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLAogICAgICAgIHRleHQ6ICfkvb/nlKjkuK0nCiAgICB9Cn0KY29uc3QgdHlwZU1hcCA9IHsKICAgICdwYXRoJzogewogICAgICAgIHZhbHVlOiAncGF0aCcsCiAgICAgICAgdGV4dDogJ+ebruW9lScsCiAgICAgICAgY29sb3I6ICdwdXJwbGUnCiAgICB9LAogICAgJ21lbnUnOiB7CiAgICAgICAgdmFsdWU6ICdtZW51JywKICAgICAgICB0ZXh0OiAn6I+c5Y2VJywKICAgICAgICBjb2xvcjogJ2JsdWUnCiAgICB9LAogICAgJ2FjdGlvbic6IHsKICAgICAgICB2YWx1ZTogJ2FjdGlvbicsCiAgICAgICAgdGV4dDogJ+aMiemSricsCiAgICAgICAgY29sb3I6ICdjeWFuJwogICAgfQp9CmNvbnN0IGNvbHVtbnMgPSBbewogICAgICAgIHRpdGxlOiAn6I+c5Y2V5ZCN56ewJywKICAgICAgICBkYXRhSW5kZXg6ICd0aXRsZScKICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICfllK/kuIDor4bliKvnoIEnLAogICAgICAgIGRhdGFJbmRleDogJ25hbWUnCiAgICB9LAogICAgewogICAgICAgIHRpdGxlOiAn6I+c5Y2VIElDT04nLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2ljb24nIH0KICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICflj6/mk43kvZzmnYPpmZAnLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2FjdGlvbnMnIH0KICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICfnsbvlnosnLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3R5cGUnIH0KICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICfnirbmgIEnLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3N0YXR1cycgfQogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ+aTjeS9nCcsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAndG9vbHMnIH0KICAgIH0KXQpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5YiX6KGo5L2/55So5Zy65pmv77ya5ZCO5Y+w566h55CG5Lit55qE5p2D6ZmQ566h55CG5Lul5Y+K6KeS6Imy566h55CG77yM5Y+v55So5LqO5Z+65LqOIFJCQUMg6K6+6K6h55qE6KeS6Imy5p2D6ZmQ5o6n5Yi277yM6aKX57KS5bqm57uG5Yiw5q+P5LiA5Liq5pON5L2c57G75Z6L44CCJywKICAgICAgICAgICAgY29sdW1ucywKICAgICAgICAgICAgdHlwZU1hcCwKICAgICAgICAgICAgc3RhdHVzLAogICAgICAgICAgICBleHBhbmRlZEtleXM6IFtdLAogICAgICAgICAgICBxdWVyeVBhcmFtOiB7fSwKICAgICAgICAgICAgbG9hZERhdGE6IHBhcmFtZXRlciA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hQZXJtaXNzaW9uKCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0cmVlLCBkYXRhIH0gPSByZXMKICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbGVUcmVlID0gdHJlZQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucm9sZVRyZWUpCiAgICAgICAgICAgICAgICAgICAgLy8g5bGV5byA5omA5pyJCiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZFJvdyhkYXRhKQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlybUxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBpbmZvOiB7fSwKICAgICAgICAgICAgcm9sZVRyZWU6IFtdLAogICAgICAgICAgICBzZWxlY3RlZDogMCwKICAgICAgICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXSwKICAgICAgICAgICAgc2VsZWN0ZWRSb3dzOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7IFNUYWJsZSwgUGVybWlzc2lvbkZvcm0gfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICBzdGF0dXNGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gc3RhdHVzTWFwW3R5cGVdLnRleHQKICAgICAgICB9LAogICAgICAgIHN0YXR1c1R5cGVGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gc3RhdHVzTWFwW3R5cGVdLnN0YXR1cwogICAgICAgIH0sCiAgICAgICAgdHlwZVRleHRGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZU1hcFt0eXBlXS50ZXh0CiAgICAgICAgfSwKICAgICAgICB0eXBlQ29sb3JGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZU1hcFt0eXBlXS5jb2xvcgogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2hvd0FjdGlvbk1vZGFsKHJvdykgewogICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSByb3cuaWQKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wZXJtaXNzaW9uRm9ybS5mb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiByb3cudHlwZSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogcm93LnRpdGxlLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvdy5uYW1lLAogICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogcm93LmNvbXBvbmVudCwKICAgICAgICAgICAgICAgICAgICBwYXRoOiByb3cucGF0aCwKICAgICAgICAgICAgICAgICAgICBwaWQ6IHJvdy5waWQudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogcm93LnJlZGlyZWN0LAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogcm93LnN0YXR1cywKICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmU6IHJvdy5rZWVwQWxpdmUsCiAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiByb3cuaGlkZGVuLAogICAgICAgICAgICAgICAgICAgIGhpZGVDaGlsZHJlbkluTWVudTogcm93LmhpZGVDaGlsZHJlbkluTWVudSwKICAgICAgICAgICAgICAgICAgICBpY29uOiByb3cuaWNvbiwKICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiByb3cucGVybWlzc2lvbiA/IHJvdy5wZXJtaXNzaW9uLnNwbGl0KCcsJykgOiBbXSwKICAgICAgICAgICAgICAgICAgICBhY3Rpb25fdHlwZTogcm93LmFjdGlvbl90eXBlLAogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl90eXBlOiByb3cuYnV0dG9uX3R5cGUKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTdWJtaXQoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMucGVybWlzc2lvbkZvcm0uZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCB2YWx1ZXMpID0+IHsKICAgICAgICAgICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IHRydWUKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5zZWxlY3RlZCA9PT0gMCA/IGFkZFBlcm1pc3Npb24odmFsdWVzKSA6IHVwZGF0ZVBlcm1pc3Npb24odGhpcy5zZWxlY3RlZCwgdmFsdWVzKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpZGUgPSB0aGlzLiRtZXNzYWdlLmxvYWRpbmcoJ+aJp+ihjOS4rS4uJywgMCkKICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHRoaXMuc2VsZWN0ZWQgPT09IDAgPyAn5re75Yqg5oiQ5Yqf77yBJyA6ICfmm7TmlrDmiJDlip/vvIEnKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUYWJsZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2FuY2VsKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1JlbG9hZFJvdXRlcnMnKQogICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBoaWRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maXJtTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGhhbmRsZUNhbmNlbCgpIHsKICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IDAKICAgICAgICAgICAgdGhpcy4kcmVmcy5wZXJtaXNzaW9uRm9ybS5mb3JtLnJlc2V0RmllbGRzKCkKICAgICAgICB9LAogICAgICAgIHNob3dEZWxldGVDb25maXJtKGlkKSB7CiAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oewogICAgICAgICAgICAgICAgdGl0bGU6ICfnoa7lrprliKDpmaTmraTop4TliJnlkJc/JywKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgICAgICAgICAgb2tUZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICAgIG9rVHlwZTogJ2RhbmdlcicsCiAgICAgICAgICAgICAgICBjYW5jZWxUZXh0OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBoaWRlID0gdGhpcy4kbWVzc2FnZS5sb2FkaW5nKCfliKDpmaTkuK0uLicsIDApCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlUGVybWlzc2lvbihpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKn++8gScpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhYmxlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1JlbG9hZFJvdXRlcnMnKQogICAgICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBoaWRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHJlZnJlc2hUYWJsZSgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy50YWJsZS5yZWZyZXNoKCkKICAgICAgICB9LAogICAgICAgIG9uU2VsZWN0Q2hhbmdlKHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dLZXlzID0gc2VsZWN0ZWRSb3dLZXlzCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gc2VsZWN0ZWRSb3dzCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVNZW51Q2xpY2soeyBrZXkgfSkgewogICAgICAgICAgICBzd2l0Y2ggKGtleSkgewogICAgICAgICAgICAgICAgY2FzZSAncmVtb3ZlJzoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGhhbmRsZVRyZWVDaGFuZ2UodikgewogICAgICAgICAgICBpZiAodiA9PT0gJzAnKSB7CiAgICAgICAgICAgICAgICAvLyBUT0RPIOW9k+mAieaLqeKAmOagueKAmeaXtu+8jOexu+Wei+S4jeiDvemAieaLqeaMiemSrgogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBleHBhbmRlZFJvdyhkYXRhKSB7CiAgICAgICAgICAgIGRhdGEubWFwKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZEtleXMucHVzaChpdGVtLmlkKQogICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZWRSb3coaXRlbS5jaGlsZHJlbikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIG9uQWN0aW9uQ2hhbmdlKGFjdGlvbikgewogICAgICAgICAgICB0aGlzLmZvcm0uc2V0RmllbGRzVmFsdWUoewogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuYWN0aW9uc1thY3Rpb25dLmxhYmVsLAogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5hY3Rpb25zW2FjdGlvbl0ua2V5CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/permission/menu","sourcesContent":["<template>\n    <div>\n        <a-card :body-style=\"{ padding: 0 }\">\n            <s-table\n                ref=\"table\"\n                size=\"default\"\n                :rowKey=\"(record) => record.id\"\n                :columns=\"columns\"\n                :data=\"loadData\"\n                :showPagination=\"false\"\n                :defaultExpandedRowKeys=\"expandedKeys\"\n                :rowSelection=\"{ selectedRowKeys: selectedRowKeys, onChange: onSelectChange }\"\n            >\n                <template slot=\"actions\" slot-scope=\"row\">\n                    <template v-if=\"row.type !== 'menu'\">-</template>\n                    <template v-for=\"(action, index) in row.actions\" v-else>\n                        <a-popover :key=\"index\" title=\"详情\" trigger=\"click\">\n                            <template slot=\"content\">\n                                <div style=\"margin-bottom:15px\">唯一识别码: {{ action.name }}</div>\n                                <a-button\n                                size=\"small\"\n                                type=\"primary\"\n                                ghost\n                                @click=\"showActionModal(action)\"\n                                style=\"margin-right:10px\">编辑</a-button>\n                                <a-button size=\"small\" v-action:DeletePermission type=\"danger\" ghost @click=\"showDeleteConfirm(action.id)\">删除</a-button>\n                            </template>\n                            <a-tag>{{ action.title }}</a-tag>\n                        </a-popover>\n                    </template>\n                </template>\n\n                <template slot=\"icon\" slot-scope=\"row\">\n                    <a-icon :type=\"row.icon\" v-if=\"row.icon\" />\n                    {{ row.icon }}\n                </template>\n\n                <template slot=\"type\" slot-scope=\"row\">\n                    <a-tag :color=\"row.type | typeColorFilter\">\n                        {{ row.type | typeTextFilter }}\n                    </a-tag>\n                </template>\n\n                <template slot=\"status\" slot-scope=\"row\">\n                    <a-badge :status=\"row.status | statusTypeFilter\" :text=\"row.status | statusFilter\" />\n                </template>\n\n                <template slot=\"tools\" slot-scope=\"row\">\n                    <a @click=\"showActionModal(row)\">编辑</a>\n                    <a-divider type=\"vertical\" />\n                    <a @click=\"showDeleteConfirm(row.id)\" :disabled=\"row.name === 'Index'\">删除</a>\n                </template>\n            </s-table>\n        </a-card>\n\n        <PermissionForm\n            ref=\"permissionForm\"\n            :visible=\"visible\"\n            :selected=\"selected\"\n            :status=\"status\"\n            :typeMap=\"typeMap\"\n            :treeData=\"roleTree\"\n            :confirmLoading=\"confirmLoading\"\n            @submit=\"handleSubmit\"\n            @cancel=\"handleCancel\"\n        />\n  </div>\n</template>\n\n<script>\nimport { STable } from '@/components'\nimport PermissionForm from './components/PermissionForm'\nimport { fetchPermission, addPermission, updatePermission, deletePermission } from '@/api/permission'\nconst status = [{ label: '是', value: 1 }, { label: '否', value: 0 }]\nconst statusMap = {\n    0: {\n        status: 'default',\n        text: '已禁用'\n    },\n    1: {\n        status: 'processing',\n        text: '使用中'\n    }\n}\nconst typeMap = {\n    'path': {\n        value: 'path',\n        text: '目录',\n        color: 'purple'\n    },\n    'menu': {\n        value: 'menu',\n        text: '菜单',\n        color: 'blue'\n    },\n    'action': {\n        value: 'action',\n        text: '按钮',\n        color: 'cyan'\n    }\n}\nconst columns = [{\n        title: '菜单名称',\n        dataIndex: 'title'\n    },\n    {\n        title: '唯一识别码',\n        dataIndex: 'name'\n    },\n    {\n        title: '菜单 ICON',\n        scopedSlots: { customRender: 'icon' }\n    },\n    {\n        title: '可操作权限',\n        scopedSlots: { customRender: 'actions' }\n    },\n    {\n        title: '类型',\n        scopedSlots: { customRender: 'type' }\n    },\n    {\n        title: '状态',\n        scopedSlots: { customRender: 'status' }\n    },\n    {\n        title: '操作',\n        scopedSlots: { customRender: 'tools' }\n    }\n]\nexport default {\n    data() {\n        return {\n            description: '列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。',\n            columns,\n            typeMap,\n            status,\n            expandedKeys: [],\n            queryParam: {},\n            loadData: parameter => {\n                return fetchPermission().then(res => {\n                    res = res.data\n                    const { tree, data } = res\n                    this.roleTree = tree\n                    console.log(this.roleTree)\n                    // 展开所有\n                    this.expandedRow(data)\n                    return res\n                })\n            },\n            loading: false,\n            visible: false,\n            confirmLoading: false,\n            info: {},\n            roleTree: [],\n            selected: 0,\n            selectedRowKeys: [],\n            selectedRows: []\n        }\n    },\n    components: { STable, PermissionForm },\n    filters: {\n        statusFilter(type) {\n            return statusMap[type].text\n        },\n        statusTypeFilter(type) {\n            return statusMap[type].status\n        },\n        typeTextFilter(type) {\n            return typeMap[type].text\n        },\n        typeColorFilter(type) {\n            return typeMap[type].color\n        }\n    },\n    methods: {\n        showActionModal(row) {\n            this.visible = true\n            this.selected = row.id\n            this.$nextTick(() => {\n                this.$refs.permissionForm.form.setFieldsValue({\n                    type: row.type,\n                    title: row.title,\n                    name: row.name,\n                    component: row.component,\n                    path: row.path,\n                    pid: row.pid.toString(),\n                    redirect: row.redirect,\n                    status: row.status,\n                    keepAlive: row.keepAlive,\n                    hidden: row.hidden,\n                    hideChildrenInMenu: row.hideChildrenInMenu,\n                    icon: row.icon,\n                    permission: row.permission ? row.permission.split(',') : [],\n                    action_type: row.action_type,\n                    button_type: row.button_type\n                })\n            })\n        },\n        handleSubmit() {\n            this.$refs.permissionForm.form.validateFields((err, values) => {\n                if (!err) {\n                    this.confirmLoading = true\n                    const promise = this.selected === 0 ? addPermission(values) : updatePermission(this.selected, values)\n                    const hide = this.$message.loading('执行中..', 0)\n                    promise.then(res => {\n                        this.$message.success(this.selected === 0 ? '添加成功！' : '更新成功！')\n                        this.refreshTable()\n                        this.handleCancel()\n                        this.$store.dispatch('ReloadRouters')\n                    }).finally(() => {\n                        hide()\n                        this.confirmLoading = false\n                    })\n                }\n            })\n        },\n        handleCancel() {\n            this.visible = false\n            this.selected = 0\n            this.$refs.permissionForm.form.resetFields()\n        },\n        showDeleteConfirm(id) {\n            this.$confirm({\n                title: '确定删除此规则吗?',\n                content: '',\n                okText: '确定',\n                okType: 'danger',\n                cancelText: '取消',\n                onOk: () => {\n                    const hide = this.$message.loading('删除中..', 0)\n                    deletePermission(id).then(res => {\n                        this.$message.success('删除成功！')\n                        this.refreshTable()\n                        this.$store.dispatch('ReloadRouters')\n                    }).finally(() => {\n                        hide()\n                        this.updating = false\n                    })\n                }\n            })\n        },\n        refreshTable() {\n            this.$refs.table.refresh()\n        },\n        onSelectChange(selectedRowKeys, selectedRows) {\n            this.selectedRowKeys = selectedRowKeys\n            this.selectedRows = selectedRows\n        },\n        handleMenuClick({ key }) {\n            switch (key) {\n                case 'remove':\n                    {\n                        // TODO\n                    }\n            }\n        },\n        handleTreeChange(v) {\n            if (v === '0') {\n                // TODO 当选择‘根’时，类型不能选择按钮\n            }\n        },\n        expandedRow(data) {\n            data.map(item => {\n                this.expandedKeys.push(item.id)\n                if (item.children !== undefined) {\n                    this.expandedRow(item.children)\n                }\n            })\n        },\n        onActionChange(action) {\n            this.form.setFieldsValue({\n                title: this.actions[action].label,\n                name: this.actions[action].key\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n.rule-list {\n    padding-left: 12px;\n    padding-right: 12px;\n    margin-bottom: 12px;\n    min-height: 23px;\n}\n</style>\n"]}]}