{"remainingRequest":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alone/VueProjects/one-piece-vue/src/views/permission/menu/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alone/VueProjects/one-piece-vue/src/views/permission/menu/Index.vue","mtime":1597402717547},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/babel-loader/lib/index.js","mtime":1595422850086},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/cache-loader/dist/cjs.js","mtime":1595422850119},{"path":"/Users/alone/VueProjects/one-piece-vue/node_modules/vue-loader/lib/index.js","mtime":1596109940102}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFNUYWJsZSB9IGZyb20gJ0AvY29tcG9uZW50cycKaW1wb3J0IFBlcm1pc3Npb25Gb3JtIGZyb20gJy4vY29tcG9uZW50cy9QZXJtaXNzaW9uRm9ybScKaW1wb3J0IHsgZmV0Y2hQZXJtaXNzaW9uLCBhZGRQZXJtaXNzaW9uLCB1cGRhdGVQZXJtaXNzaW9uLCBkZWxldGVQZXJtaXNzaW9uIH0gZnJvbSAnQC9hcGkvcGVybWlzc2lvbicKY29uc3Qgc3RhdHVzID0gW3sgbGFiZWw6ICfmmK8nLCB2YWx1ZTogMSB9LCB7IGxhYmVsOiAn5ZCmJywgdmFsdWU6IDAgfV0KY29uc3Qgc3RhdHVzTWFwID0gewogICAgMDogewogICAgICAgIHN0YXR1czogJ2RlZmF1bHQnLAogICAgICAgIHRleHQ6ICflt7LnpoHnlKgnCiAgICB9LAogICAgMTogewogICAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLAogICAgICAgIHRleHQ6ICfkvb/nlKjkuK0nCiAgICB9Cn0KY29uc3QgdHlwZU1hcCA9IHsKICAgICdwYXRoJzogewogICAgICAgIHZhbHVlOiAncGF0aCcsCiAgICAgICAgdGV4dDogJ+ebruW9lScsCiAgICAgICAgY29sb3I6ICdnb2xkJwogICAgfSwKICAgICdtZW51JzogewogICAgICAgIHZhbHVlOiAnbWVudScsCiAgICAgICAgdGV4dDogJ+iPnOWNlScsCiAgICAgICAgY29sb3I6ICdibHVlJwogICAgfSwKICAgICdhY3Rpb24nOiB7CiAgICAgICAgdmFsdWU6ICdhY3Rpb24nLAogICAgICAgIHRleHQ6ICfmjInpkq4nLAogICAgICAgIGNvbG9yOiAnY3lhbicKICAgIH0KfQpjb25zdCBjb2x1bW5zID0gWwogICAgewogICAgICAgIHRpdGxlOiAn6I+c5Y2V5ZCN56ewJywKICAgICAgICBkYXRhSW5kZXg6ICd0aXRsZScKICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICfllK/kuIDor4bliKvnoIEnLAogICAgICAgIGRhdGFJbmRleDogJ25hbWUnCiAgICB9LAogICAgewogICAgICAgIHRpdGxlOiAn6I+c5Y2VIElDT04nLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2ljb24nIH0KICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICflj6/mk43kvZzmnYPpmZAnLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2FjdGlvbnMnIH0KICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICfnsbvlnosnLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3R5cGUnIH0KICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICfnirbmgIEnLAogICAgICAgIHNjb3BlZFNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ3N0YXR1cycgfQogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ+adg+mHjScsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnd2VpZ2h0JyB9CiAgICB9LAogICAgewogICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICBzY29wZWRTbG90czogeyBjdXN0b21SZW5kZXI6ICd0b29scycgfQogICAgfQpdCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGVzY3JpcHRpb246ICfliJfooajkvb/nlKjlnLrmma/vvJrlkI7lj7DnrqHnkIbkuK3nmoTmnYPpmZDnrqHnkIbku6Xlj4rop5LoibLnrqHnkIbvvIzlj6/nlKjkuo7ln7rkuo4gUkJBQyDorr7orqHnmoTop5LoibLmnYPpmZDmjqfliLbvvIzpopfnspLluqbnu4bliLDmr4/kuIDkuKrmk43kvZznsbvlnovjgIInLAogICAgICAgICAgICBjb2x1bW5zLAogICAgICAgICAgICB0eXBlTWFwLAogICAgICAgICAgICBzdGF0dXMsCiAgICAgICAgICAgIGV4cGFuZGVkS2V5czogW10sCiAgICAgICAgICAgIHF1ZXJ5UGFyYW06IHt9LAogICAgICAgICAgICBsb2FkRGF0YTogcGFyYW1ldGVyID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFBlcm1pc3Npb24oKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHRyZWUsIGRhdGEgfSA9IHJlcwogICAgICAgICAgICAgICAgICAgIHRoaXMucm9sZVRyZWUgPSB0cmVlCiAgICAgICAgICAgICAgICAgICAgLy8g5bGV5byA5omA5pyJCiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZFJvdyhkYXRhKQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlybUxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBpbmZvOiB7fSwKICAgICAgICAgICAgcm9sZVRyZWU6IFtdLAogICAgICAgICAgICBzZWxlY3RlZDogMCwKICAgICAgICAgICAgc2VsZWN0ZWRSb3dLZXlzOiBbXSwKICAgICAgICAgICAgc2VsZWN0ZWRSb3dzOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBjb21wb25lbnRzOiB7IFNUYWJsZSwgUGVybWlzc2lvbkZvcm0gfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICBzdGF0dXNGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gc3RhdHVzTWFwW3R5cGVdLnRleHQKICAgICAgICB9LAogICAgICAgIHN0YXR1c1R5cGVGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gc3RhdHVzTWFwW3R5cGVdLnN0YXR1cwogICAgICAgIH0sCiAgICAgICAgdHlwZVRleHRGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZU1hcFt0eXBlXS50ZXh0CiAgICAgICAgfSwKICAgICAgICB0eXBlQ29sb3JGaWx0ZXIodHlwZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZU1hcFt0eXBlXS5jb2xvcgogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2hvd0FjdGlvbk1vZGFsKHJvdykgewogICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSByb3cuaWQKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wZXJtaXNzaW9uRm9ybS5mb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiByb3cudHlwZSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogcm93LnRpdGxlLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvdy5uYW1lLAogICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogcm93LmNvbXBvbmVudCwKICAgICAgICAgICAgICAgICAgICBwYXRoOiByb3cucGF0aCwKICAgICAgICAgICAgICAgICAgICBwaWQ6IHJvdy5waWQudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogcm93LnJlZGlyZWN0LAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogcm93LnN0YXR1cywKICAgICAgICAgICAgICAgICAgICBrZWVwQWxpdmU6IHJvdy5rZWVwQWxpdmUsCiAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiByb3cuaGlkZGVuLAogICAgICAgICAgICAgICAgICAgIGhpZGVDaGlsZHJlbkluTWVudTogcm93LmhpZGVDaGlsZHJlbkluTWVudSwKICAgICAgICAgICAgICAgICAgICBpY29uOiByb3cuaWNvbiwKICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiByb3cucGVybWlzc2lvbiA/IHJvdy5wZXJtaXNzaW9uLnNwbGl0KCcsJykgOiBbXSwKICAgICAgICAgICAgICAgICAgICBhY3Rpb25fdHlwZTogcm93LmFjdGlvbl90eXBlLAogICAgICAgICAgICAgICAgICAgIGJ1dHRvbl90eXBlOiByb3cuYnV0dG9uX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiByb3cud2VpZ2h0CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2hvd0FkZE1vZGFsKHJvdykgewogICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0ZWQgPSByb3cuaWQKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5wZXJtaXNzaW9uRm9ybS5mb3JtLnNldEZpZWxkc1ZhbHVlKHsKICAgICAgICAgICAgICAgICAgICBwaWQ6IHJvdy5pZC50b1N0cmluZygpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlU3VibWl0KCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLnBlcm1pc3Npb25Gb3JtLmZvcm0udmFsaWRhdGVGaWVsZHMoKGVyciwgdmFsdWVzKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuc2VsZWN0ZWQgPT09IDAgPyBhZGRQZXJtaXNzaW9uKHZhbHVlcykgOiB1cGRhdGVQZXJtaXNzaW9uKHRoaXMuc2VsZWN0ZWQsIHZhbHVlcykKICAgICAgICAgICAgICAgICAgICBjb25zdCBoaWRlID0gdGhpcy4kbWVzc2FnZS5sb2FkaW5nKCfmiafooYzkuK0uLicsIDApCiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh0aGlzLnNlbGVjdGVkID09PSAwID8gJ+a3u+WKoOaIkOWKn++8gScgOiAn5pu05paw5oiQ5Yqf77yBJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGFibGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNhbmNlbCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdSZWxvYWRSb3V0ZXJzJykKICAgICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaGlkZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgaGFuZGxlQ2FuY2VsKCkgewogICAgICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gMAogICAgICAgICAgICB0aGlzLiRyZWZzLnBlcm1pc3Npb25Gb3JtLmZvcm0ucmVzZXRGaWVsZHMoKQogICAgICAgIH0sCiAgICAgICAgc2hvd0RlbGV0ZUNvbmZpcm0oaWQpIHsKICAgICAgICAgICAgdGhpcy4kY29uZmlybSh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ+ehruWumuWIoOmZpOatpOinhOWImeWQlz8nLAogICAgICAgICAgICAgICAgY29udGVudDogJycsCiAgICAgICAgICAgICAgICBva1RleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgb2tUeXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgIGNhbmNlbFRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgb25PazogKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpZGUgPSB0aGlzLiRtZXNzYWdlLmxvYWRpbmcoJ+WIoOmZpOS4rS4uJywgMCkKICAgICAgICAgICAgICAgICAgICBkZWxldGVQZXJtaXNzaW9uKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5Yqf77yBJykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGFibGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnUmVsb2FkUm91dGVycycpCiAgICAgICAgICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGUoKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0aW5nID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgcmVmcmVzaFRhYmxlKCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLnJlZnJlc2goKQogICAgICAgIH0sCiAgICAgICAgb25TZWxlY3RDaGFuZ2Uoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0tleXMgPSBzZWxlY3RlZFJvd0tleXMKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBzZWxlY3RlZFJvd3MKICAgICAgICB9LAogICAgICAgIGhhbmRsZU1lbnVDbGljayh7IGtleSB9KSB7CiAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgICAgICAgICAgICBjYXNlICdyZW1vdmUnOgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlVHJlZUNoYW5nZSh2KSB7CiAgICAgICAgICAgIGlmICh2ID09PSAnMCcpIHsKICAgICAgICAgICAgICAgIC8vIFRPRE8g5b2T6YCJ5oup4oCY5qC54oCZ5pe277yM57G75Z6L5LiN6IO96YCJ5oup5oyJ6ZKuCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGV4cGFuZGVkUm93KGRhdGEpIHsKICAgICAgICAgICAgZGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkS2V5cy5wdXNoKGl0ZW0uaWQpCiAgICAgICAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRlZFJvdyhpdGVtLmNoaWxkcmVuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgb25BY3Rpb25DaGFuZ2UoYWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy5hY3Rpb25zW2FjdGlvbl0ubGFiZWwsCiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFjdGlvbnNbYWN0aW9uXS5rZXkKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/permission/menu","sourcesContent":["<template>\n    <page-header-wrapper :content=\"description\">\n        <a-card :body-style=\"{ padding: 0 }\">\n            <div class=\"table-operator-right\">\n                <a-button v-action:addPermission type=\"primary\" icon=\"plus\" @click=\"visible = true\">新建</a-button>\n                <a-divider type=\"vertical\"/>\n                <span class=\"ant-pro-table-toolbar-item-icon\">\n                    <a-tooltip placement=\"top\">\n                    <template slot=\"title\">\n                        <span>刷新</span>\n                    </template>\n                    <a-icon type=\"reload\" @click=\"refreshTable()\"/>\n                    </a-tooltip>\n                </span>\n            </div>\n            <s-table\n                ref=\"table\"\n                size=\"default\"\n                :rowKey=\"(record) => record.id\"\n                :columns=\"columns\"\n                :data=\"loadData\"\n                :showPagination=\"false\"\n                :defaultExpandedRowKeys=\"expandedKeys\"\n            >\n                <template slot=\"actions\" slot-scope=\"row\">\n                    <template v-if=\"row.type !== 'menu'\">-</template>\n                    <template v-for=\"(action, index) in row.actions\" v-else>\n                        <a-popover :key=\"index\" title=\"详情\" trigger=\"hover\">\n                            <template slot=\"content\">\n                                <div style=\"margin-bottom:15px\">唯一识别码: {{ action.name }}</div>\n                                <a-button\n                                    v-action:editPermission\n                                    size=\"small\"\n                                    type=\"primary\"\n                                    ghost\n                                    @click=\"showActionModal(action)\"\n                                    style=\"margin-right:10px\"\n                                >编辑</a-button>\n                                <a-button v-action:deletePermission size=\"small\" type=\"danger\" ghost @click=\"showDeleteConfirm(action.id)\">删除</a-button>\n                            </template>\n                            <a-tag>{{ action.title }}</a-tag>\n                        </a-popover>\n                    </template>\n                </template>\n\n                <template slot=\"icon\" slot-scope=\"row\">\n                    <a-icon :type=\"row.icon\" v-if=\"row.icon\" />\n                    {{ row.icon }}\n                </template>\n\n                <template slot=\"type\" slot-scope=\"row\">\n                    <a-tag :color=\"row.type | typeColorFilter\">\n                        {{ row.type | typeTextFilter }}\n                    </a-tag>\n                </template>\n\n                <template slot=\"status\" slot-scope=\"row\">\n                    <a-badge :status=\"row.status | statusTypeFilter\" :text=\"row.status | statusFilter\" />\n                </template>\n\n                <template slot=\"weight\" slot-scope=\"row\">\n                    <span>{{ row.weight }}</span>\n                </template>\n\n                <template slot=\"tools\" slot-scope=\"row\">\n                    <a v-action:addPermission @click=\"showAddModal(row)\" :disabled=\"row.type === 'action'\">新建</a>\n                    <a-divider type=\"vertical\" />\n                    <a v-action:editPermission @click=\"showActionModal(row)\">编辑</a>\n                    <a-divider type=\"vertical\" />\n                    <a v-action:deletePermission @click=\"showDeleteConfirm(row.id)\" :disabled=\"row.name === 'Index'\">删除</a>\n                </template>\n            </s-table>\n        </a-card>\n\n        <PermissionForm\n            ref=\"permissionForm\"\n            :visible=\"visible\"\n            :selected=\"selected\"\n            :status=\"status\"\n            :typeMap=\"typeMap\"\n            :treeData=\"roleTree\"\n            :confirmLoading=\"confirmLoading\"\n            @submit=\"handleSubmit\"\n            @cancel=\"handleCancel\"\n        />\n    </page-header-wrapper>\n</template>\n\n<script>\nimport { STable } from '@/components'\nimport PermissionForm from './components/PermissionForm'\nimport { fetchPermission, addPermission, updatePermission, deletePermission } from '@/api/permission'\nconst status = [{ label: '是', value: 1 }, { label: '否', value: 0 }]\nconst statusMap = {\n    0: {\n        status: 'default',\n        text: '已禁用'\n    },\n    1: {\n        status: 'processing',\n        text: '使用中'\n    }\n}\nconst typeMap = {\n    'path': {\n        value: 'path',\n        text: '目录',\n        color: 'gold'\n    },\n    'menu': {\n        value: 'menu',\n        text: '菜单',\n        color: 'blue'\n    },\n    'action': {\n        value: 'action',\n        text: '按钮',\n        color: 'cyan'\n    }\n}\nconst columns = [\n    {\n        title: '菜单名称',\n        dataIndex: 'title'\n    },\n    {\n        title: '唯一识别码',\n        dataIndex: 'name'\n    },\n    {\n        title: '菜单 ICON',\n        scopedSlots: { customRender: 'icon' }\n    },\n    {\n        title: '可操作权限',\n        scopedSlots: { customRender: 'actions' }\n    },\n    {\n        title: '类型',\n        scopedSlots: { customRender: 'type' }\n    },\n    {\n        title: '状态',\n        scopedSlots: { customRender: 'status' }\n    },\n    {\n        title: '权重',\n        scopedSlots: { customRender: 'weight' }\n    },\n    {\n        title: '操作',\n        scopedSlots: { customRender: 'tools' }\n    }\n]\nexport default {\n    data() {\n        return {\n            description: '列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。',\n            columns,\n            typeMap,\n            status,\n            expandedKeys: [],\n            queryParam: {},\n            loadData: parameter => {\n                return fetchPermission().then(res => {\n                    res = res.data\n                    const { tree, data } = res\n                    this.roleTree = tree\n                    // 展开所有\n                    this.expandedRow(data)\n                    return res\n                })\n            },\n            loading: false,\n            visible: false,\n            confirmLoading: false,\n            info: {},\n            roleTree: [],\n            selected: 0,\n            selectedRowKeys: [],\n            selectedRows: []\n        }\n    },\n    components: { STable, PermissionForm },\n    filters: {\n        statusFilter(type) {\n            return statusMap[type].text\n        },\n        statusTypeFilter(type) {\n            return statusMap[type].status\n        },\n        typeTextFilter(type) {\n            return typeMap[type].text\n        },\n        typeColorFilter(type) {\n            return typeMap[type].color\n        }\n    },\n    methods: {\n        showActionModal(row) {\n            this.visible = true\n            this.selected = row.id\n            this.$nextTick(() => {\n                this.$refs.permissionForm.form.setFieldsValue({\n                    type: row.type,\n                    title: row.title,\n                    name: row.name,\n                    component: row.component,\n                    path: row.path,\n                    pid: row.pid.toString(),\n                    redirect: row.redirect,\n                    status: row.status,\n                    keepAlive: row.keepAlive,\n                    hidden: row.hidden,\n                    hideChildrenInMenu: row.hideChildrenInMenu,\n                    icon: row.icon,\n                    permission: row.permission ? row.permission.split(',') : [],\n                    action_type: row.action_type,\n                    button_type: row.button_type,\n                    weight: row.weight\n                })\n            })\n        },\n        showAddModal(row) {\n            this.visible = true\n            // this.selected = row.id\n            this.$nextTick(() => {\n                this.$refs.permissionForm.form.setFieldsValue({\n                    pid: row.id.toString()\n                })\n            })\n        },\n        handleSubmit() {\n            this.$refs.permissionForm.form.validateFields((err, values) => {\n                if (!err) {\n                    this.confirmLoading = true\n                    const promise = this.selected === 0 ? addPermission(values) : updatePermission(this.selected, values)\n                    const hide = this.$message.loading('执行中..', 0)\n                    promise.then(res => {\n                        this.$message.success(this.selected === 0 ? '添加成功！' : '更新成功！')\n                        this.refreshTable()\n                        this.handleCancel()\n                        this.$store.dispatch('ReloadRouters')\n                    }).finally(() => {\n                        hide()\n                        this.confirmLoading = false\n                    })\n                }\n            })\n        },\n\n        handleCancel() {\n            this.visible = false\n            this.selected = 0\n            this.$refs.permissionForm.form.resetFields()\n        },\n        showDeleteConfirm(id) {\n            this.$confirm({\n                title: '确定删除此规则吗?',\n                content: '',\n                okText: '确定',\n                okType: 'danger',\n                cancelText: '取消',\n                onOk: () => {\n                    const hide = this.$message.loading('删除中..', 0)\n                    deletePermission(id).then(res => {\n                        this.$message.success('删除成功！')\n                        this.refreshTable()\n                        this.$store.dispatch('ReloadRouters')\n                    }).finally(() => {\n                        hide()\n                        this.updating = false\n                    })\n                }\n            })\n        },\n        refreshTable() {\n            this.$refs.table.refresh()\n        },\n        onSelectChange(selectedRowKeys, selectedRows) {\n            this.selectedRowKeys = selectedRowKeys\n            this.selectedRows = selectedRows\n        },\n        handleMenuClick({ key }) {\n            switch (key) {\n                case 'remove':\n                    {\n                        // TODO\n                    }\n            }\n        },\n        handleTreeChange(v) {\n            if (v === '0') {\n                // TODO 当选择‘根’时，类型不能选择按钮\n            }\n        },\n        expandedRow(data) {\n            data.map(item => {\n                this.expandedKeys.push(item.id)\n                if (item.children !== undefined) {\n                    this.expandedRow(item.children)\n                }\n            })\n        },\n        onActionChange(action) {\n            this.form.setFieldsValue({\n                title: this.actions[action].label,\n                name: this.actions[action].key\n            })\n        }\n    }\n}\n</script>\n\n<style scoped>\n.rule-list {\n    padding-left: 12px;\n    padding-right: 12px;\n    margin-bottom: 12px;\n    min-height: 23px;\n}\n</style>\n"]}]}